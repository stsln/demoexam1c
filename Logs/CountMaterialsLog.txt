// Форма списка справочника Фурнитура
&НаСервере
Процедура ПолучитьИтог()
	Если Не ОтборКатегория.Пустая() Тогда
		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ
		| СУММА(Фурнитура.Количество) КАК Количество,
		| КОЛИЧЕСТВО(Фурнитура.Код) КАК ВсегоФурнитуры
		| ИЗ
		| Справочник.Фурнитура КАК Фурнитура
		| ГДЕ
		| Фурнитура.КатегорияКачества = &КатегорияКачества";
		Запрос.УстановитьПараметр ("КатегорияКачества", ОтборКатегория);
		РезультатЗапроса = Запрос.Выполнить().Выгрузить();
		ВсегоФурнитуры = РезультатЗапроса[0].ВсегоФурнитуры;
		КоличествоФурнитуры = РезультатЗапроса[0].Количество;
	Иначе
		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ
		| СУММА(Фурнитура.Количество) КАК Количество,
		| КОЛИЧЕСТВО(Фурнитура.Код) КАК ВсегоФурнитуры
		| ИЗ
		| Справочник.Фурнитура КАК Фурнитура"; 
		РезультатЗапроса = Запрос.Выполнить().Выгрузить();
		ВсегоФурнитуры = РезультатЗапроса[0].ВсегоФурнитуры;
		КоличествоФурнитуры = РезультатЗапроса[0].Количество;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ПолучитьИтог();
КонецПроцедуры