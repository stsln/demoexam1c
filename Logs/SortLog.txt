// Форма списка в справочнике Оборудование
&НаКлиенте
Перем ПеременнаяОтбор;

&НаКлиенте
Процедура ВыполнитьОтбор(Команда)
	СтрокаПоиска = СокрЛП(ОтборПоМарке);
	Если ПустаяСтрока(СтрокаПоиска) Тогда		
		Если ПеременнаяОтбор <> Неопределено Тогда
			ПеременнаяОтбор.Использование = Ложь;
			ПеременнаяОтбор = Неопределено;
		КонецЕсли;
		Возврат;
	КонецЕсли;
	ИскатьПоПодобию = 0;
	Если СтрНайти(СтрокаПоиска, "^") <> 0 Тогда
		СтрокаПоиска = СтрЗаменить(СтрокаПоиска, "^", "%");
		ИскатьПоПодобию = 1;
	КонецЕсли;
	Если СтрНайти(СтрокаПоиска, "@") <> 0 Тогда
		СтрокаПоиска = СтрЗаменить(СтрокаПоиска, "@", "_");
		ИскатьПоПодобию = 1;
	КонецЕсли;
	Если ПеременнаяОтбор = Неопределено Тогда
		ПеременнаяОтбор = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		ПеременнаяОтбор.Использование = Истина;
		ПеременнаяОтбор.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("МаркаДляОтбора");
	КонецЕсли;
		Если ИскатьПоПодобию = 0 Тогда
		ПеременнаяОтбор.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
	Иначе
		ПеременнаяОтбор.ВидСравнения = ВидСравненияКомпоновкиДанных.Подобно;
	КонецЕсли;
	ПеременнаяОтбор.ПравоеЗначение = СтрокаПоиска;
КонецПроцедуры